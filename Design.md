#本反编译器的设计思路 v0.1

# Introduction #

主要分成几个模块来实现,如负责启动程序,解析命令行参数的部分,负责IO操作的部分,对dump文件进行基本建模部分,对Method进行转译的具有某种寄存器模拟的VM,最后是整合内部类,优化方法,优化输出的部分.


# Details #

Add your content here.  Format your content with:
  * 启动程序,解析命令行参数
1. 读取命令行参数,读入源apk文件的路径,读取输出路径,及其他配置参数
2. 将参数保存在一个对象中,传递给IO部分
  * IO操作
1. 根据启动参数,解压apk文件(使用外部工具),读取dex文件,读取其他资源文件
2. 使用外部工具,dump出dex文件,一般以行为单位,读取成String列表
3. 将数据传给建模部分
4. 当优化整合部分完成后,负责将文件写回文件系统
  * dump文件进行基本建模
1. 根据opcode对每行dump出来的内容进行比对,全部转为特定的对象
2. 根据基本跳转等价规律,替换部分goto语句,略过部分nop语句,并对if语句的调整进行检查
  * 具有某种寄存器模拟的VM
1. 根据已转为对象的模型,读入一个VM,其具有某种寄存器的模拟,以模式匹配的方式,合并/替换/删除/调整模型
2. 解析switch块,转译goto语句,转译if语句,最终目标为完全转为等价的java语句
  * 整合内部类,优化方法,优化输出
1. 寻找内部类
2. 寻找内部类的内联方法
3. 处理方法结构
4. 根据包名,类名,合并重组全部反编译好的文件,通过IO系统写入文件系统